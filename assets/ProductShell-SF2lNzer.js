import{d as K,i as u,q as T,n as S,t as N,v as $,m as se,a as O,w as C,o as R,f as I,F as G,A as ae,j as D,k as A,B as U,s as x,l as W,x as k,S as re,U as ce,z as p,D as ie,af as le,c as Q,Q as ue}from"./vue-N1vwxG77.js";import{_ as B,u as q,b as E,s as L,p as de,a as pe,d as me,c as ve}from"./index-0rC--EyN.js";import{g as fe}from"./getMessageFromError-KCSW6jpt.js";import{h as _e}from"./document-l6RdaXdg.js";import{E as ge}from"./specRenderer-QZkoYPrL.js";/* empty css              */import{f as he}from"./fetchAll-gydFt7zS.js";import"./kongponents-juAo2PPt.js";const Se={key:0,class:"mb-3"},ye=K({__name:"Section",props:{title:{type:String,default:null}},setup(e){return(m,c)=>(u(),T("section",null,[e.title?(u(),T("header",Se,[S("h2",null,N(e.title),1)])):$("",!0),se(m.$slots,"default",{},void 0,!0)]))}}),H=B(ye,[["__scopeId","data-v-13bc53f2"]]),Ie=K({name:"DocumentTree",props:{documents:{type:Array,required:!0},productId:{type:String,required:!0},activeDocumentId:{type:String,default:null},level:{type:Number,default:1},parentDocumentSlug:{type:String,default:""}},setup:e=>{const m=O({});function c(o,n){const l=n.reduce((d,f)=>(d[f.id]=!0,d),{});if(o){m.value=l;const d=n.find(f=>f.id===o||_e(f.children||[],o));d&&(l[d.id]=!1)}m.value=l}return C([()=>e.activeDocumentId,()=>e.documents],([o,n])=>{c(o,n)}),R(()=>{c(e.activeDocumentId,e.documents)}),{isNodeCollapsedMap:m}}}),De=e=>(re("data-v-71b5b1f1"),e=e(),ce(),e),be=De(()=>S("div",null,null,-1)),we={class:"expandable-node-container"},Ve=["onClick"],Pe={class:"children",role:"region",tabindex:"-1"};function Ae(e,m,c,o,n,l){const d=I("router-link"),f=I("KIcon"),_=I("DocumentTree",!0),g=I("KCollapse");return u(),T("ul",null,[(u(!0),T(G,null,ae(e.documents,t=>(u(),T("li",{key:t.id},[t.children&&t.children.length?(u(),D(g,{key:0,modelValue:e.isNodeCollapsedMap[t.id],"onUpdate:modelValue":r=>e.isNodeCollapsedMap[t.id]=r,class:"collapse-container"},{trigger:A(()=>[be]),"visible-content":A(()=>[S("div",we,[k(d,{to:{name:"api-documentation-page",params:{product:e.productId,slug:[e.parentDocumentSlug,t.slug].filter(Boolean)}},style:U({paddingLeft:`${e.level-1}rem`}),class:x({title:!0})},{default:A(()=>[W(N(t.title),1)]),_:2},1032,["to","style"]),S("button",{class:x(["expand-button",e.isNodeCollapsedMap[t.id]?null:"expand-icon"]),onClick:r=>e.isNodeCollapsedMap[t.id]=!e.isNodeCollapsedMap[t.id]},[k(f,{icon:"chevronDown",size:"16"})],10,Ve)])]),default:A(()=>[S("div",null,[S("div",Pe,[k(_,{documents:t.children,"active-document-id":e.activeDocumentId,"product-id":e.productId,level:e.level+1,"parent-document-slug":t.slug},null,8,["documents","active-document-id","product-id","level","parent-document-slug"])])])]),_:2},1032,["modelValue","onUpdate:modelValue"])):(u(),D(d,{key:1,to:{name:"api-documentation-page",params:{product:e.productId,slug:[e.parentDocumentSlug,t.slug].filter(Boolean)}},class:x({title:!0}),style:U({paddingLeft:`${e.level-1}rem`})},{default:A(()=>[W(N(t.title),1)]),_:2},1032,["to","style"]))]))),128))])}const Te=B(Ie,[["render",Ae],["__scopeId","data-v-71b5b1f1"]]),ke=K({__name:"SectionOverview",props:{product:{type:Object,required:!0}},setup(e){const m=q().state.helpText.sectionOverview,c=e,o=E(),{documentTree:n,activeDocumentId:l}=L(o);return(d,f)=>p(n).length&&c.product?(u(),D(H,{key:0,title:p(m).title},{default:A(()=>[k(Te,{documents:p(n),"product-id":c.product.id,"active-document-id":p(l)},null,8,["documents","product-id","active-document-id"])]),_:1},8,["title"])):$("",!0)}}),$e=K({__name:"SectionReference",props:{product:{type:Object,required:!0},activeProductVersionId:{type:String,required:!0},deselectOperation:{type:Boolean,default:!1}},emits:["operationSelected"],setup(e,{emit:m}){const c=O(null),o=O(!0),n=e,l=m,d=E();async function f(){var t,r;const _=(t=n.product)==null?void 0:t.id,g=n.activeProductVersionId;if(!(!_||!g)){o.value=!0;try{const i=await de.service.versionsApi.getProductVersionSpecOperations({productId:_,productVersionId:g});c.value=(r=i.data.operations)==null?void 0:r.map(h=>({...h,operationId:h.operation_id})),d.setSidebarOperations(c.value)}catch(i){console.error(i)}finally{o.value=!1}}}return f(),C([()=>n.product,()=>n.activeProductVersionId],f),(_,g)=>{const t=I("KSkeleton");return e.product&&e.product.versions.length?(u(),D(H,{key:0},{default:A(()=>[o.value?(u(),D(t,{key:0})):c.value?(u(),D(p(ge),{key:1,operations:c.value,deselect:e.deselectOperation,width:"100%",class:"operations-list",onSelected:g[0]||(g[0]=r=>l("operationSelected",r))},null,8,["operations","deselect"])):$("",!0)]),_:1})):$("",!0)}}}),Ce=B($e,[["__scopeId","data-v-0e10c61f"]]),Oe={class:"px-5 py-6 content"},Ke={class:"mb-6"},Ne=["title"],Be=K({__name:"Sidebar",props:{deselectOperation:{type:Boolean,default:!1}},emits:["operationSelected"],setup(e,{emit:m}){const c=E(),{product:o,activeProductVersionId:n}=L(c),l=q().state.helpText.sidebar,d=l.noResultsProduct,f=m,_=O([]);function g(){var r;_.value=((r=o.value)==null?void 0:r.versions.slice().sort((i,h)=>new Date(i.created_at).getTime()-new Date(h.created_at).getTime()).map(i=>({value:i.id,label:`${i.name}${i.deprecated?l.deprecated:""}`,selected:i.id===n.value})))||[]}function t(r){var h;const i=(h=o.value)==null?void 0:h.versions.find(y=>y.id===r.value);i&&c.setActiveProductVersionId(i.id)}return R(()=>{g()}),C([()=>o.value,()=>n.value],()=>{g()}),(r,i)=>{var b,V;const h=I("KAlert"),y=I("KSelect");return u(),T("aside",null,[S("div",Oe,[S("header",Ke,[S("span",{class:"title mb-5",title:(b=p(o))==null?void 0:b.name},N((V=p(o))==null?void 0:V.name),9,Ne),p(o)&&!_.value.length?(u(),D(h,{key:0,appearance:"warning","alert-message":p(l).noVersions,class:"mb-4"},null,8,["alert-message"])):$("",!0),k(y,{appearance:"select",class:"version-select-dropdown",width:"100%","data-testid":"version-select-dropdown","enable-filtering":!1,items:_.value,onChange:t},{empty:A(()=>[S("div",null,N(p(d)),1)]),_:1},8,["items"])]),k(ke,{product:p(o)},null,8,["product"]),p(n)?(u(),D(Ce,{key:0,"active-product-version-id":p(n),product:p(o),"deselect-operation":e.deselectOperation,onOperationSelected:i[0]||(i[0]=M=>f("operationSelected",M))},null,8,["active-product-version-id","product","deselect-operation"])):$("",!0)])])}}}),Me=B(Be,[["__scopeId","data-v-c1f7535a"]]);function Ee(e,m="asc"){return(c,o)=>{const n=new Date(c[e]).getTime(),l=new Date(o[e]).getTime();return n===l?0:m==="asc"?n>l?1:-1:n<l?1:-1}}const xe={class:"container flex pb-0 product fixed-position"},Re={class:"sidebar-wrapper"},qe={class:"content"},Le=K({__name:"ProductShell",setup(e){const{notify:m}=ve(),c=q().state.helpText,o=ie(),n=le(),{portalApiV2:l}=pe(),d=O(null),f=O(!1),_=O(!1),g=c.productVersion.deprecatedWarningProduct,t=E(),{product:r,documentTree:i,activeDocumentSlug:h,activeProductVersionId:y}=L(t),b=Q(()=>o.params.product),V=Q(()=>o.params.product_version);function M(){const s=o.params.slug,a=Array.isArray(s)?s[s.length-1]:s;a!==h.value&&t.setActiveDocumentSlug(a)}const{productsApi:J,versionsApi:X,documentationApi:Y}=l.value.service;async function Z(){var a;const s=b.value;try{const{data:v}=await J.getProduct({productId:s}),w={...v,versions:await he(P=>X.listProductVersions({...P,productId:s}))};t.setProduct(w)}catch(v){t.setProduct(null),console.error(v),((a=v.response)==null?void 0:a.status)===404&&n.push({name:"not-found"}),d.value=fe(v)}}async function ee(){const s=b.value;try{const a={productId:s};if(t.product){const v=await Y.listProductDocuments(a,{headers:{accept:me.DocumentContentTypeEnum.VndKonnectDocumentTreejson}});t.setDocumentTree(v.data.data)}}catch(a){a.response.status===404?t.setDocumentTree([]):(console.error(a),m({appearance:"danger",message:c.productVersion.unableToRetrieveDoc}))}}function z(){var v,w;if(!r.value)return;const s=r.value.versions.slice().sort(Ee("created_at"));if(!s)return;const a=(v=V.value)==null?void 0:v.toLowerCase();if(a){const P=s.find(j=>{var F;return j.id===a||((F=j.name)==null?void 0:F.toLowerCase())===a});P&&t.setActiveProductVersionId(P.id)}y.value||t.setActiveProductVersionId((w=s[0])==null?void 0:w.id)}function te(s){s&&n.replace({name:"api-documentation-page",params:{product:o.params.product,slug:[s]}})}function oe(){o.name==="spec"&&(t.setSidebarActiveOperation(null),n.push({name:"spec",params:{product:b.value,product_version:y.value}}))}function ne(s){const a={name:"spec",params:{product:b.value,product_version:y.value}};o.name!=="spec"?n.push(a).then(()=>t.setSidebarActiveOperation(s)):n.replace(a).then(()=>t.setSidebarActiveOperation(s))}return R(async()=>{M(),await Z(),await ee(),z()}),C(()=>V.value,()=>{V.value&&V.value!==y.value&&t.setActiveProductVersionId(V.value),z()}),C(()=>o.name,()=>{_.value=o.name!=="spec"}),C(()=>y.value,(s,a)=>{var w;if(a&&s!==a&&oe(),!((w=r.value)!=null&&w.version_count))return;const v=r.value.versions.filter(P=>P.id===y.value)[0];f.value=v==null?void 0:v.deprecated}),C(()=>b.value,()=>{var s;b.value!==((s=r.value)==null?void 0:s.id)&&t.setProduct(null)}),ue(()=>{var s;if(M(),i.value&&!h.value&&o.path.includes("/docs/")){const a=(s=i.value[0])==null?void 0:s.slug;te(a)}}),(s,a)=>{const v=I("EmptyState"),w=I("KAlert"),P=I("router-view");return u(),T("div",xe,[d.value?(u(),D(v,{key:0,"is-error":"",class:"mt-6",message:d.value},null,8,["message"])):p(r)?(u(),T(G,{key:1},[S("div",Re,[k(Me,{class:"sidebar","deselect-operation":_.value,onOperationSelected:ne},null,8,["deselect-operation"])]),S("div",qe,[f.value?(u(),D(w,{key:0,appearance:"warning","alert-message":p(g),class:"deprecated-warning"},null,8,["alert-message"])):$("",!0),k(P,{product:p(r)},null,8,["product"])])],64)):$("",!0)])}}}),Je=B(Le,[["__scopeId","data-v-8844377d"]]);export{Je as default};
